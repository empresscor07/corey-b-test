<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JSON Test</title>
    <script>
        function main() {
            console.log('main')

            //prints ipv6 ip
            fetch('http://ip.jsontest.com/')
                .then(response => response.json())
                .then(json => {
                    console.log(json)
                    document.getElementById('ip').innerText = json.ip
                })

            //prints the headers
            const fetchPromise = fetch('http://headers.jsontest.com/') //gives us a full response back
            const responsePromise = fetchPromise.then(response => {
                console.log(response)
                return response.json() //gives us just the body back and turning it into json object
            })
            responsePromise.then(json => {
                console.log(json)
                document.getElementById("header").innerText = json.Host + ', ' + json.Accept
            })

            //prints ipv6 ip
            fetch('http://validate.jsontest.com/?json={"key":"value"}')
                .then(response => response.json())
                .then(json => {
                    console.log(json)
                    document.getElementById('validate').innerText = json.validate
                })

            fetch('http://code.jsontest.com')
                .then(response => response.text()) // just wait for body to come in and don't convert to json.
                .then(text => document.getElementById("arbitrary").innerText = text)
        }
        main()
    </script>
</head>
<body>
    <div id="ip"></div>
    <div id="header"></div>
    <div id="validate"></div>
    <div id="arbitrary"></div>
</body>
</html>